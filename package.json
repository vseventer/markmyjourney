{
  "name"        : "MarkMyJourney",
  "version"     : "0.1.0-dev",
  "description" : "My personal website http://www.markmyjourney.com.",
  "keywords"    : [ "blog", "travel" ],
  "homepage"    : "http://www.markmyjourney.com",
  "bugs"        : "https://github.com/vseventer/markmyjourney/issues",
  "license"     : "MIT",
  "author"      : "Mark van Seventer <mark@vseventer.com>",
  "repository"  : { "type": "git", "url": "vseventer/markmyjourney" },
  "scripts"     : {
    "hash"     : "hashmark --cwd ./public -l 4 '{css,js}/*' '{dir}/{name}.{hash}{ext}' | replaceinfiles -s 'public/**/*.html'",
    "posthash" : "rimraf './public/{css,js}/!(*.*.*)'",
    "sass"     : "node-sass -o static/css/ static/css/main.scss",
    "sprity"   : "sprity create static/img/ 'sprites/**/*.png' -c ../img -d 1:72 -d 2:192 -s ../css/sprite.css --margin 0 --name icon --split --orientation binary-tree --prefix icon",
    "prewebpack" : "rimraf ./node_modules/leaflet-minimap/node_modules/leaflet",
    "webpack"    : "webpack static/js/components.js --display-modules",

    "preleaflet"         : "mkdir -p ./static/img",
    "leaflet"            : "parallelshell 'npm run leaflet:fullscreen' 'npm run leaflet:main'",
    "leaflet:fullscreen" : "cp node_modules/leaflet-fullscreen/dist/*.png ./static/img",
    "leaflet:main"       : "cp node_modules/leaflet/dist/images/*.png ./static/img",

    "premake" : "mkdir -p ./static/uploads",
    "make"    : "parallelshell 'npm run make:css' 'npm run make:exif' 'npm run leaflet' 'npm run make:thumbs' 'npm run make:uploads'",

    "make:css"     : "npm run sprity && npm run sass",
    "make:exif"    : "./bin/exif.js uploads/*",
    "make:leaflet" : "npm run leaflet",
    "make:thumbs"  : "sharp 'uploads/*' -w 133 -h 100 -o ./static/uploads/thumbs --quality=100 --rotate --withoutMetadata",
    "make:uploads" : "sharp 'uploads/*' -w 1280 -o ./static/uploads --quality=100 --rotate --withoutMetadata",

    "prebuild"  : "npm run clean && npm run build:hugo",
    "build"     : "parallelshell 'npm run build:css' 'npm run build:html' 'npm run build:img' 'npm run build:js' 'npm run build:thumbs' 'npm run build:uploads'",
    "postbuild" : "rimraf public/css/main.scss public/css/sprite.css && npm run hash",

    "build:css"     : "uncss -H ./public -s /css/main.css -u ./.uncssrc 'public/**/*.html' | cleancss --s0 -do public/css/main.css",
    "build:html"    : "find ./public -iname '*.html' -exec html-minifier -c ./.htmlrc {} -o {} \\;",
    "prebuild:hugo" : "npm run make",
    "build:hugo"    : "./bin/hugo -v",
    "build:img"     : "imagemin -P mozjpeg -P pngquant --speed 1 'public/img/*' ./public/img",
    "build:js"      : "find ./public/js -iname '*.js' -exec uglifyjs {} -cmvo {} \\;",
    "build:thumbs"  : "imagemin -P mozjpeg --progressive --quality 90 'public/uploads/thumbs/*' ./public/uploads/thumbs",
    "build:uploads" : "imagemin -P mozjpeg --progressive --quality 70 'public/uploads/*' ./public/uploads",

    "clean"       : "rimraf public/* static/css/*.css ./static/img/*.png static/uploads/*.jpg static/uploads/thumbs/*.jpg",
    "predeploy"   : "npm run build",
    "deploy"      : "confirm && ./bin/deploy.js",
    "postinstall" : "napa && npm run webpack",
    "prestart"    : "npm run make",
    "prestage"    : "npm run build",
    "stage"       : "echo replace",
    "start"       : "npm run watch",
    "watch"       : "parallelshell 'npm run sass -- -w' './bin/hugo server -vw'"
  },
  "dependencies"    : { },
  "devDependencies" : {
    "bootstrap"     : "twbs/bootstrap#v4.0.0-alpha.2",
    "clean-css"     : "3.4.x",
    "confirm"       : "0.1.x",
    "exif-reader"   : "1.0.x",
    "gh-pages"      : "0.8.x",
    "hashmark"      : "3.1.x",
    "html-minifier" : "1.1.x",
    "imagemin-cli"  : "2.1.x",
    "imagemin-mozjpeg"  : "5.1.x",
    "imagemin-pngquant" : "4.2.x",
    "jquery"        : "2.2.x",
    "leaflet"       : "1.0.0-beta.2",
    "leaflet-dataoptions"   : "vseventer/Leaflet.dataoptions",
    "leaflet-fullscreen"    : "1.0.x",
    "leaflet.markercluster" : "Leaflet/Leaflet.markercluster#v1.0.0-beta.2.0",
    "leaflet-minimap"       : "3.0.x",
    "moment"        : "2.11.x",
    "napa"          : "2.2.x",
    "node-sass"     : "3.4.x",
    "parallelshell" : "2.0.x",
    "rimraf"        : "2.5.x",
    "sharp-cli"     : "0.2.x",
    "sizzle"        : "2.3.x",
    "@songkick/replaceinfiles": "1.1.x",
    "sprity-cli"    : "1.0.x",
    "uglifyjs"      : "2.4.x",
    "uncss"         : "elamperti/uncss#patch-150",
    "webpack"       : "1.12.x"
  },
  "napa"    : { "leaflet-geodesic" : "henrythasler/Leaflet.Geodesic#testing1.0" },
  "engines" : {
    "hugo" : "0.15",
    "node" : "4.x"
  },
  "private": true
}