{
  "name"        : "MarkMyJourney",
  "version"     : "0.1.0-dev",
  "description" : "My personal website http://www.markmyjourney.com.",
  "keywords"    : [ "blog", "travel" ],
  "homepage"    : "http://www.markmyjourney.com",
  "bugs"        : "https://github.com/vseventer/markmyjourney/issues",
  "license"     : "MIT",
  "author"      : "Mark van Seventer <mark@vseventer.com>",
  "repository"  : { "type": "git", "url": "vseventer/markmyjourney" },
  "scripts"     : {
    "css"     : "uncss -u ./.uncssrc 'tmp/**/*.html' | cleancss --s0 --semantic-merging -do public/css/main.css",
    "sass"    : "node-sass -o static/css/ static/css/main.scss",
    "sprity"  : "sprity create static/img/ 'sprites/**/*.png' -c ../img -d 1:72 -d 2:192 -s ../css/sprite.css --margin 0 --name icon --split --orientation binary-tree --prefix icon",
    "webpack" : "webpack static/js/components.js --display-modules",

    "preleaflet"         : "mkdir -p ./static/img",
    "leaflet"            : "parallelshell 'npm run leaflet:fullscreen' 'npm run leaflet:main'",
    "leaflet:fullscreen" : "cp node_modules/leaflet-fullscreen/dist/*.png ./static/img",
    "leaflet:main"       : "cp node_modules/leaflet/dist/images/*.png ./static/img",

    "make" : "parallelshell 'npm run make:css' 'npm run make:exif' 'npm run leaflet' 'npm run make:thumbs' 'npm run make:uploads'",

    "make:css"     : "npm run sprity && npm run sass",
    "make:exif"    : "./bin/exif.js uploads/* > data/uploads.json",
    "make:leaflet" : "npm run leaflet",
    "make:thumbs"  : "sharp 'uploads/*' -h 100  -o ./static/uploads/thumbs --withoutMetadata",
    "make:uploads" : "sharp 'uploads/*' -w 1920 -o ./static/uploads        --withoutMetadata",

    "prebuild"  : "npm run clean && npm run build:hugo",
    "build"     : "parallelshell 'npm run build:css' 'npm run build:html' 'npm run build:img' 'npm run build:js' 'npm run build:thumbs' 'npm run build:uploads'",
    "postbuild" : "rimraf public/css/main.scss public/css/sprite.css",

    "build:css"     : "hugo server -d ./tmp -w=false & TASK_PID=$! && npm run css && kill $TASK_PID",
    "build:html"    : "find ./public -iname '*.html' -exec html-minifier -c ./.htmlrc {} -o {} \\;",
    "prebuild:hugo" : "npm run make",
    "build:hugo"    : "hugo -v",
    "build:img"     : "imagemin -P mozjpeg -P pngquant --speed 1 'public/img/*' ./public/img",
    "build:js"      : "find ./public/js -iname '*.js' -exec uglifyjs {} -cmvo {} --comments '/\/*!/' \\;",
    "build:thumbs"  : "imagemin -P mozjpeg --quality 100 'public/uploads/thumbs/*' ./public/uploads/thumbs",
    "build:uploads" : "imagemin -P mozjpeg --quality 50 'public/uploads/*' ./public/uploads",

    "clean"       : "rimraf data/uploads.json public/* static/css/*.css ./static/img/*.png ./static/uploads ./tmp",
    "deploy"      : "npm run build",
    "postinstall" : "npm run webpack",
    "prestart"    : "npm run make",
    "start"       : "npm run watch",
    "watch"       : "parallelshell 'npm run sass -- -w' 'hugo server -vw'"
  },
  "dependencies"    : { },
  "devDependencies" : {
    "amd-define-factory-patcher-loader": "1.0.x",
    "bootstrap"     : "twbs/bootstrap#v4.0.0-alpha.2",
    "clean-css"     : "3.4.x",
    "exif-reader"   : "1.0.x",
    "html-minifier" : "1.0.x",
    "imagemin-cli"  : "2.0.x",
    "imagemin-mozjpeg"  : "5.1.x",
    "imagemin-pngquant" : "4.2.x",
    "jquery"        : "2.1.x",
    "leaflet"       : "1.0.0-beta.2",
    "leaflet-dataoptions"   : "vseventer/Leaflet.dataoptions",
    "leaflet-fullscreen"    : "0.0.x",
    "leaflet.markercluster" : "Leaflet/Leaflet.markercluster#v1.0.0-beta.2.0",
    "leaflet-minimap"       : "3.0.x",
    "moment"        : "2.10.x",
    "node-sass"     : "3.4.x",
    "parallelshell" : "2.0.x",
    "rimraf"        : "2.5.x",
    "sharp-cli"     : "0.2.x",
    "sprity-cli"    : "1.0.x",
    "uglifyjs"      : "2.4.x",
    "uncss"         : "0.12.x",
    "webpack"       : "1.12.x"
  },
  "engines": {
    "hugo" : "0.15",
    "node" : "4.x"
  },
  "private": true
}