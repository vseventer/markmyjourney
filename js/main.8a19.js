!function(e,t){"use strict";var r=2,o=4,a=12,n=Array.prototype.slice,i=function(e){return e.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community",detectRetina:!0,maxZoom:a+1,minZoom:r})};t.addEventListener("ready:components",function(){var s=e.jQuery,l=e.Arc,c=e.L;c.Icon.Default.imagePath="/img/",s(".carousel").on("slide.bs.carousel",function(e){var t=s('[data-target="#'+this.id+'"]').removeClass("active"),r=s(e.relatedTarget);r.attr("style",r.attr("data-style")).removeAttr("data-style"),t.filter('[data-slide-to="'+r.index()+'"]').addClass("active")});var u=function(){return{preferCanvas:!0,boxZoom:!1,doubleClickZoom:!1,layers:i(c),maxZoom:a,minZoom:r,keyboard:!1,scrollWheelZoom:!1,tap:!1}},d=t.querySelectorAll(".mmjy-map");n.call(d).forEach(function(t){var r=c.map(t,u()),a=t.getAttribute("data-source"),n=c.geoJson(e[a],{onEachFeature:function(e,t){if(e.properties.geodesic){var r=e.geometry.coordinates.map(function(e){for(var t=[],r=1;r<e.length;r+=1){var o=e[r-1],a=e[r],n={x:o[0],y:o[1]},i={x:a[0],y:a[1]},s=new l.GreatCircle(n,i).Arc(10);t.push(s.json().geometry.coordinates.map(function(e){return e.reverse()}))}return t});t.setLatLngs(r)}return null!=e.properties.title&&t.bindTooltip(e.properties.title,{className:"mmjy-tooltip",direction:"top"}),e},pointToLayer:function(e,t){var r=c.marker(t);if(null!=e.properties.html){var o=new c.DivIcon({className:null,html:e.properties.html,iconSize:null});r.setIcon(o)}return r},style:function(e){var t="MultiLineString"===e.geometry.type?3:1;return{color:"#006400",weight:t}}}),s=c.markerClusterGroup({maxClusterRadius:24,showCoverageOnHover:!1}).addTo(r);n.getLayers().forEach(function(e){var t=null!=e.feature.properties.html?s:r;t.addLayer(e)});var d=new c.Control.MiniMap(i(c),{height:100,mapOptions:u(),width:100,zoomLevelFixed:-8});r.on("load zoomend",function(){o<r.getZoom()?null==d._map&&d.addTo(r)._miniMap.dragging.disable():r.removeControl(d)});var m=n.getBounds();r.fitBounds(m).setMaxBounds(m)})},!1),e.addEventListener("load",function(){var e=t.querySelectorAll("script[data-src]");n.call(e).forEach(function(e){var r=e.getAttribute("data-event");null!==r&&(e.onload=function(){var e=t.createEvent("CustomEvent");e.initCustomEvent("ready:"+r,!1,!1,void 0),t.dispatchEvent(e)}),e.setAttribute("src",e.getAttribute("data-src")),e.removeAttribute("data-src")})},!1)}(window,document);